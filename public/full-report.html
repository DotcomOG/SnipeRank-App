<!--
  Version: 1.10.0-FR.2
  Last Updated: Aug 14, 2025 18:40 UTC
  Changes in .2:
  - Removed accidental nested <script> that was breaking execution
  - Enforce bullets AFTER inject: 5 "What's Working" (3–5 sentences), 20 "Needs Attention" (4–6)
  - LLM logos: robust local loader (/img/... then img/...) with text fallback
  - No other layout/style changes
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SnipeRank — Full Report</title>
  <style>
    :root{
      --max-width:760px; --pad-v:3vh; --pad-h:2rem;
      --muted:#666; --border:#e5e5e5;
      --sr-radius:16px; --sr-border:#e6e6e9; --sr-shadow:0 10px 30px rgba(0,0,0,.12);
      --sr-text:#111; --sr-muted:#5b5b66; --sr-bg:#fff; --sr-pill-bg:#fafafb; --sr-gap:16px;
    }
    *{box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;background:#fff;color:#000;margin:0;padding:var(--pad-v) var(--pad-h);max-width:var(--max-width);margin-inline:auto;display:flex;flex-direction:column;align-items:flex-start}
    h1{font-size:4rem;font-weight:700;margin:0 0 .25em 0;line-height:1;letter-spacing:-1px;background:linear-gradient(135deg,#000 0%,#3182CE 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    h2{font-size:1.6rem;font-weight:700;margin:0 0 1rem 0}
    p{font-size:1.075rem;line-height:1.65;margin:0 0 1rem 0}

    .info-row{width:100%;display:flex;gap:1rem;align-items:center;justify-content:space-between;margin:.25rem 0 1rem}
    .powered-by,.for-url{color:var(--muted);font-size:.95rem}
    .powered-by a{color:#3182CE;text-decoration:none;font-weight:600}
    .for-url strong{color:#000}

    .card{width:100%;border:1px solid var(--border);border-radius:12px;box-shadow:0 1px 2px rgba(0,0,0,.04);background:#fff}
    .score-card{padding:1rem;margin-bottom:2.25rem}
    .score-top{display:flex;align-items:center;gap:.75rem;justify-content:space-between;flex-wrap:wrap}
    .score-main{display:flex;align-items:baseline;gap:.5rem}
    .score-number{font-size:2.25rem;font-weight:800}
    .score-band{color:var(--muted);font-size:.95rem}
    .btn-row{display:flex;gap:.5rem;align-items:center}
    .btn-ghost{border:1px solid #111;background:#fff;color:#111;padding:.55rem .9rem;border-radius:8px;cursor:pointer;font-weight:700;font-size:.95rem;transition:.2s}
    .btn-ghost:hover{background:#f2f2f2}
    .pillars{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-top:.75rem}
    .pillar{border:1px solid var(--border);border-radius:10px;padding:.6rem .75rem;display:flex;align-items:center;justify-content:space-between;font-size:.98rem;background:#fff}
    .pillar .label{font-weight:600}
    .badge{font-weight:700;padding:.2rem .5rem;border-radius:999px;border:1px solid var(--border);font-size:.85rem;background:#fafafa}
    .highlights{margin-top:.9rem;padding-top:.9rem;border-top:1px dashed var(--border)}
    .highlights h4{margin:0 0 .55rem 0;font-size:1.2rem;font-weight:800}
    .highlights ul{margin:0;padding-left:1rem}
    .highlights li{margin:.45rem 0;line-height:1.5}

    #summary-results .section-title{font-size:1.25rem!important;font-weight:700!important;margin:2rem 0 .6rem 0!important}
    #summary-results ul{margin:0 0 1.1rem 1.1rem!important;padding-left:.2rem!important;list-style:disc!important}
    #summary-results li{line-height:1.6!important;margin:.55rem 0!important;font-size:1.02rem!important}

    .llm-insights{margin:.4rem 0 1.2rem}
    .llm-row{display:grid;grid-template-columns:auto 1fr;gap:.8rem 1rem;align-items:start;padding:.8rem 0;border-bottom:1px dashed var(--border)}
    .llm-row:last-child{border-bottom:0}
    .llm-logo{display:flex;align-items:center;justify-content:center;min-width:42px;height:32px}
    .llm-logo img{height:28px;width:auto;display:block;object-fit:contain;max-width:110px}
    .llm-fallback{display:inline-flex;align-items:center;justify-content:center;height:28px;padding:0 .75rem;border:1px solid var(--border);border-radius:6px;font-size:.85rem;font-weight:600;color:#333;background:#f8f9fa}

    .consultation-section{text-align:center;margin:2.5rem 0}
    .consultation-section .btn-primary{background:#dc3545;color:#fff;border:none;padding:.85rem 2rem;border-radius:8px;font-size:1.05rem;font-weight:600;cursor:pointer;text-decoration:none;display:inline-block}
    .consultation-note{background:#f8f9fa;padding:1rem;border-radius:8px;margin-top:1.5rem;font-size:.95rem}

    .footer{width:100%;text-align:center;padding:2rem 0 1rem;margin-top:3rem;border-top:1px solid var(--border);color:#666;font-size:.9rem}

    .sr-modal{position:fixed;inset:0;display:none;z-index:9999}
    .sr-modal[aria-hidden="false"]{display:block}
    .sr-modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.3)}
    .sr-modal__panel{position:relative;max-width:720px;width:calc(100% - 32px);margin:6vh auto;background:var(--sr-bg);color:var(--sr-text);border:1px solid var(--sr-border);border-radius:var(--sr-radius);box-shadow:var(--sr-shadow);padding:20px;max-height:90vh;overflow-y:auto}
    .sr-modal__close{position:absolute;top:10px;right:10px;border:1px solid var(--sr-border);background:#fff;border-radius:999px;width:32px;height:32px;line-height:28px;font-size:18px;cursor:pointer;text-align:center}
    .sr-modal__header h2{margin:0 0 4px;font-size:18px;font-weight:700}
    .sr-modal__sub{margin:0 0 12px;color:var(--sr-muted);font-size:14px;line-height:1.35}
    .sr-pill{background:var(--sr-pill-bg);border:1px solid var(--sr-border);border-radius:12px;padding:12px 14px;margin-bottom:var(--sr-gap)}
    .sr-pill__title{margin:0 0 6px;font-size:15px;font-weight:700}
    .sr-list{margin:0;padding-left:18px}
    .sr-list li{margin:6px 0;line-height:1.35}
    .sr-modal__fineprint{margin-top:8px;color:var(--sr-muted);font-size:12px;line-height:1.3;border-top:1px dashed var(--sr-border);padding-top:10px}

    @media(max-width:600px){.pillars{grid-template-columns:1fr}h1{font-size:3rem}}
  </style>
</head>
<body>
  <h1>SnipeRank</h1>
  <h2>AI SEO Analysis Results</h2>

  <div class="info-row">
    <div class="powered-by">Powered by <a href="https://quontora.com" target="_blank" rel="noopener">quontora</a></div>
    <div class="for-url">Analysis for: <strong id="current-url">—</strong></div>
  </div>

  <!-- Score Card (shared) -->
  <section class="card score-card" id="scoreCard" aria-live="polite">
    <div class="score-top">
      <div class="score-main">
        <div class="score-number" id="scoreNumber">—</div>
        <div class="score-band" id="scoreBand">Calculating…</div>
      </div>
      <div class="btn-row">
        <button class="btn-ghost" type="button" data-open="sr-modal">View Scoring Methodology</button>
        <button class="btn-ghost" id="copyLLMBtn" type="button">Copy Shareable Summary</button>
      </div>
    </div>
    <div class="pillars" id="pillarsGrid"></div>
    <div class="highlights" id="highlightsBlock" hidden>
      <h4>Highlights</h4>
      <ul id="highlightsList"></ul>
    </div>
  </section>

  <!-- Backend HTML goes here -->
  <section id="summary-results">
    <p style="text-align:center;color:gray;">Loading analysis...</p>
  </section>

  <!-- Single CTA (no form on full-report) -->
  <section class="consultation-section">
    <h3>Ready to Improve Your AI Visibility?</h3>
    <p>After reviewing your analysis, book a free 30‑minute consultation to discuss your specific opportunities and next steps.</p>
    <a href="https://calendly.com/quontora" class="btn-primary" target="_blank" rel="noopener">Schedule Free Consultation</a>
    <p class="consultation-note"><strong>What we'll cover:</strong> Your AI SEO opportunities, implementation timeline, and how to get found by ChatGPT, Gemini, and other AI platforms.</p>
  </section>

  <div class="footer">© 2025 SnipeRank by <a href="https://quontora.com" target="_blank" rel="noopener" style="color:#3182CE;text-decoration:none;">quontora.com</a>. Last updated August 11.</div>

  <!-- Methodology Modal (shared) -->
  <div id="sr-modal" class="sr-modal" aria-hidden="true" role="dialog" aria-labelledby="sr-modal-title">
    <div class="sr-modal__backdrop" data-close></div>
    <div class="sr-modal__panel" role="document">
      <button class="sr-modal__close" aria-label="Close" data-close>×</button>
      <header class="sr-modal__header">
        <h2 id="sr-modal-title">SnipeRank Scoring Methodology</h2>
        <p class="sr-modal__sub">Our proprietary model evaluates four pillars (+ freshness preview). Items below are representative checks used to guide recommendations.</p>
      </header>
      <section class="sr-pill"><h3 class="sr-pill__title">AI Access Readiness</h3><ul class="sr-list"><li>robots.txt, meta directives, and sitemap crawlability.</li><li>Core Web Vitals thresholds & render stability (LCP/CLS/INP).</li><li>Internal link discoverability (click depth, orphan risk).</li></ul></section>
      <section class="sr-pill"><h3 class="sr-pill__title">Trust & Verification Signals</h3><ul class="sr-list"><li>HTTPS/SSL health and redirect hygiene.</li><li>Organization/Person schema and verifiable profiles.</li><li>Contact/footprint consistency across key surfaces.</li></ul></section>
      <section class="sr-pill"><h3 class="sr-pill__title">LLM Interpretability & Clarity</h3><ul class="sr-list"><li>Headings that ladder to one core claim.</li><li>Structured elements (lists/Q&A/tables) over dense paragraphs.</li><li>Entity disambiguation: names, dates, roles, locations.</li></ul></section>
      <section class="sr-pill"><h3 class="sr-pill__title">Prompt-Pattern Alignment</h3><ul class="sr-list"><li>Answer-first summaries and "how/compare" FAQs.</li><li>Task framing suitable for AI snippets and summaries.</li><li>Schema coverage (FAQ, Article/BlogPosting, WebSite).</li></ul></section>
      <section class="sr-pill"><h3 class="sr-pill__title">Freshness & Engagement Signals</h3><ul class="sr-list"><li>Update cadence and last‑modified headers on key pages.</li><li>Data recency and time‑boxed claims.</li><li>Interactive components and text equivalents.</li></ul></section>
      <footer class="sr-modal__fineprint">Exact weights are confidential. Scores include small variance to reflect signal confidence.</footer>
    </div>
  </div>

  <script>
    /* =========================
       LLM logos (local images)
       ========================= */
    const LOGO_SOURCES = {
      ChatGPT: ['/img/chatgpt-logo.png'],
      Claude: ['/img/claude-logo.png'],
      Gemini: ['/img/gemini-logo.png'],
      Copilot: ['/img/copilot-logo.png'],
      Perplexity: ['/img/perplexity-logo.png']
    };
    function logoDivFor(engine){
      const div=document.createElement('div'); div.className='llm-logo';
      const primary=(LOGO_SOURCES[engine]||[])[0];
      if(!primary){ div.innerHTML=`<span class="llm-fallback">${engine}</span>`; return div; }
      const candidates=[primary, primary.replace(/^\/+/,'')]; // /img/x.png → img/x.png
      const img=document.createElement('img'); let i=0;
      const next=()=>{ if(i<candidates.length){ img.src=candidates[i++]; } else { div.innerHTML=`<span class="llm-fallback">${engine}</span>`; } };
      img.onerror=next; img.onload=()=>{ div.innerHTML=''; div.appendChild(img); }; next();
      return div;
    }

    document.addEventListener("DOMContentLoaded", async () => {
      const urlParams = new URLSearchParams(window.location.search);
      const targetUrl = urlParams.get("url") || "https://example.com";
      document.getElementById("current-url").textContent = targetUrl;

      /* =========================
         Load backend report HTML
         ========================= */
      try {
        const res = await fetch(`https://sniperank-app2.onrender.com/report.html?url=${encodeURIComponent(targetUrl)}`);
        const html = await res.text();
        const host = document.getElementById("summary-results");
        host.innerHTML = html;

        // Enforce bullet counts + expand copy AFTER injection
        try {
          const domain = new URL(targetUrl).hostname.replace(/^www\./,'');
          enforceBulletCounts(host, domain);
        } catch(e) { console.warn("Bullet enforcement skipped:", e); }

        // Convert "AI Engine Insights" bullets → rows with logos + paragraph
        transformAIInsights(host);

      } catch (err) {
        console.error("Error loading analysis:", err);
        document.getElementById("summary-results").innerHTML =
          "<p style='text-align:center;color:red;'>Error loading analysis. Please try again.</p>";
      }

      /* =========================
         Scorecard (demo fallback)
         ========================= */
      const p={access:20,trust:19,clarity:22,alignment:20,freshness:19};
      renderScoreCard(p.access+p.trust+p.clarity+p.alignment+p.freshness, p, [
        "Ensure consistent schema coverage (Org, WebSite, FAQ) across key templates.",
        "Add concise FAQ aligned to 'how/compare' prompts (4–6 non‑overlapping Q&As).",
        "Reinforce org identity: bylines/authorship, About/company snippet, and a persistent contact path.",
        "Favor lists/Q&A/tables so AI can extract answers without parsing dense paragraphs."
      ]);

      /* =========================
         Modal handlers
         ========================= */
      document.addEventListener('click', (e) => {
        if (e.target.closest('[data-open="sr-modal"]')) document.getElementById('sr-modal').setAttribute('aria-hidden','false');
        if (e.target.matches('[data-close]')) document.getElementById('sr-modal').setAttribute('aria-hidden','true');
      });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') document.getElementById('sr-modal').setAttribute('aria-hidden','true'); });

      /* =========================
         Copy shareable summary
         ========================= */
      document.getElementById("copyLLMBtn").addEventListener("click", async () => {
        const txt = buildLLMSummary(targetUrl);
        try{ await navigator.clipboard.writeText(txt);
          const b=document.getElementById("copyLLMBtn"); const old=b.textContent; b.textContent="Copied!"; setTimeout(()=>b.textContent=old,1500);
        }catch{ window.prompt("Copy the summary:", txt); }
      });

      /* =========================
         Helpers
         ========================= */
      function renderScoreCard(total, pillars, highlights){
        document.getElementById("scoreNumber").textContent = `${total}/100`;
        document.getElementById("scoreBand").textContent =
          total>=85?"Rank: Highly Visible ★★★★☆":total>=70?"Rank: Partially Visible ★★★☆☆":total>=55?"Rank: Needs Work ★★☆☆☆":"Rank: Low Visibility ★☆☆☆☆";

        const grid = document.getElementById("pillarsGrid");
        grid.innerHTML = "";
        [
          ["AI Access Readiness", pillars.access],
          ["Trust & Verification Signals", pillars.trust],
          ["LLM Interpretability & Clarity", pillars.clarity],
          ["Prompt-Pattern Alignment", pillars.alignment],
          ["Freshness & Engagement Signals", pillars.freshness],
        ].forEach(([label,val]) => {
          const d=document.createElement("div"); d.className="pillar";
          d.innerHTML = `<span class="label">${label}</span><span class="badge">${val}/20</span>`;
          grid.appendChild(d);
        });

        if (highlights?.length){
          const ul=document.getElementById("highlightsList");
          ul.innerHTML="";
          highlights.forEach(h=>{ const li=document.createElement("li"); li.textContent=h; ul.appendChild(li); });
          document.getElementById("highlightsBlock").hidden=false;
        }
      }

      function buildLLMSummary(url){
        const labels = Array.from(document.querySelectorAll('.pillar .label')).map(n=>n.textContent.trim());
        const vals = Array.from(document.querySelectorAll('.pillar .badge')).map(n=>n.textContent.trim());
        const lines = [
          `Website: ${url}`,
          `SnipeRank Score: ${document.getElementById("scoreNumber").textContent}`,
          `Pillars:`,
          ...labels.map((l,i)=>`- ${l}: ${vals[i]}`),
          ``,
          `Observed Highlights / Issues:`,
          ...Array.from(document.querySelectorAll('#highlightsList li')).map(li=>`- ${li.textContent.trim()}`),
          ``,
          `Next step — talk with Quontora:`,
          `• Book a free 30‑minute consult: https://calendly.com/quontora`,
          `• We’ll deliver a tailored 30‑day plan prioritized by Technical, Content, Schema, and Freshness.`
        ];
        return lines.join("\n");
      }

      /* ========= Bullet Enforcement (5 / 20 with sentence ranges) ========= */

      function enforceBulletCounts(root, d){
        const workingUL = findULAfterTitle(root, /what'?s\s*working/i);
        const needsUL   = findULAfterTitle(root, /needs\s*attention/i);

        if (workingUL) normalizeItems(workingUL, 5, makeWorkingTemplates(d), 3, 5, d);
        if (needsUL)   normalizeItems(needsUL, 20, makeNeedsTemplates(d), 4, 6, d);
      }

      function findULAfterTitle(root, rx){
        const h = Array.from(root.querySelectorAll("h2,h3,h4,.section-title"))
          .find(n => rx.test((n.textContent||"").trim()));
        if (!h) return null;
        let el = h.nextElementSibling;
        while (el && el.tagName && el.tagName.toLowerCase() !== "ul") el = el.nextElementSibling;
        return el || null;
      }

      function normalizeItems(ul, targetCount, templates, minSent, maxSent, d){
        // 1) Collect current items, dedupe by subject (text before ':')
        const seen = new Set();
        const items = [];
        Array.from(ul.querySelectorAll("li")).forEach(li => {
          const raw = (li.textContent || "").trim();
          if (!raw) return;
          const subj = (raw.split(":")[0] || raw).trim().toLowerCase();
          if (!seen.has(subj)) { seen.add(subj); items.push(li); }
        });

        // 2) Expand each current item to a paragraph (respect min/max sentences)
        items.forEach(li => {
          const raw = (li.textContent||"").trim();
          const subj = (raw.split(":")[0] || raw).trim();
          const body = expandToParagraph(subj, raw, templates, minSent, maxSent, d);
          li.innerHTML = `<strong>${escapeHTML(subj)}:</strong> ${body}`;
          li.innerHTML = trimToSentenceRange(li.innerText, minSent, maxSent, subj); // ensure range
        });

        // 3) Backfill from templates until targetCount reached (avoid duplicates)
        for (const t of templates) {
          if (items.length >= targetCount) break;
          const key = t.title.toLowerCase();
          if (seen.has(key)) continue;
          const li = document.createElement("li");
          const body = t.text(d);
          const html = `<strong>${escapeHTML(t.title)}:</strong> ${body}`;
          li.innerHTML = html;
          li.innerHTML = trimToSentenceRange(li.innerText, minSent, maxSent, t.title);
          ul.appendChild(li);
          items.push(li);
          seen.add(key);
        }

        // 4) If still short, lightly vary phrasing to reach target (keeps honesty)
        while (items.length < targetCount && templates.length){
          const t = templates[ items.length % templates.length ];
          const li = document.createElement("li");
          const body = (t.text(d)+'').replace(/\bon\s+[^.\s]+/i, `on ${d}`);
          li.innerHTML = `<strong>${escapeHTML(t.title)}:</strong> ${body}`;
          li.innerHTML = trimToSentenceRange(li.innerText, minSent, maxSent, t.title);
          ul.appendChild(li);
          items.push(li);
        }
      }

      function expandToParagraph(subj, raw, templates, minSent, maxSent, d){
        const t = templates.find(x => x.title.toLowerCase() === subj.toLowerCase());
        if (t) return t.text(d);
        const base = raw.replace(/^.*?:\s*/, ""); // strip leading "Subject:"
        const s1 = base || `${subj} needs attention on ${d}.`;
        const s2 = `This can reduce how AI systems map ${d}'s entities and tasks to user prompts.`;
        const s3 = `Clarifying structure and links typically improves snippet quality and inclusion.`;
        const s4 = `Prioritize this area in the next sprint and validate with a focused crawl of ${d}.`;
        const s5 = `Document owner and expected update cadence to stabilize the signal.`;
        return [s1,s2,s3,s4,s5].join(" ");
      }

      function trimToSentenceRange(text, minS, maxS, subj){
        const parts = (text||'').trim().split(/(?<=[.!?])\s+(?=[A-Z(])/).filter(Boolean);
        const limited = parts.length>maxS ? parts.slice(0,maxS) : (parts.length<minS ? parts : parts);
        const body = limited.join(' ');
        return `<strong>${escapeHTML(subj)}:</strong> ${escapeHTML(body.replace(new RegExp('^'+subj+'\\s*:\\s*','i'),'')).replace(/^:/,'')}`;
      }

      function escapeHTML(s){ return (s||'').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

      /* =========================
         Templates (neutral copy)
         ========================= */
      function makeWorkingTemplates(d){
        return [
          { title: "SSL Security Implementation", text: d=>`${d} serves over HTTPS, establishing transport security and baseline trust with AI crawlers and search engines. This reduces downgrade risk from mixed content or redirect chains and supports inclusion in assistant‑style answers. Redirect hygiene appears stable across primary routes. Maintain this posture as you expand content and subdomains.` },
          { title: "Mobile‑Responsive Design", text: d=>`Pages on ${d} render responsively, aligning with mobile‑first crawling and snippet extraction. Consistent layout cues help parsers segment content into scannable units. Preserve this by testing new templates on common device breakpoints. Avoid layout shifts that could affect Core Web Vitals and snippet stability.` },
          { title: "Content Structure Recognition", text: d=>`Headings and lists on ${d} are generally parsable, which improves answer extraction. Clear section spines support entity mapping and reduce hallucination risk. Keep reinforcing list/table patterns around key tasks and FAQs. This strengthens eligibility for answer‑first summaries.` },
          { title: "Image Optimization Baseline", text: d=>`A large share of images on ${d} include descriptive alt text, supporting multimodal understanding and accessibility. Continue standardizing alt patterns around core entities and actions. This makes visual references usable in assistant contexts. Periodically audit heavy images for compression.` },
          { title: "Redirect & Canonical Hygiene", text: d=>`Primary redirects on ${d} look clean, lowering crawl waste and consolidation risk. Canonicals resolve to self or preferred versions. Maintain this with any CMS migrations or campaign URLs. Good consolidation helps AI engines attribute statements to the right source.` }
        ];
      }

      function makeNeedsTemplates(d){
        return [
          { title: "Schema Markup Missing", text: d=>`Entity signaling is light on ${d}. Without Organization, WebSite, and FAQ coverage across key templates, assistants have weaker hooks to verify source and topic. Add baseline schema and validate in Rich Results. Stronger markup reduces ambiguity and improves snippet inclusion. Re‑audit after deployment.` },
          { title: "Internal Linking Strategy", text: d=>`Connections between related pages on ${d} are inconsistent, which can obscure answer paths and orphan key topics. Build concise hubs and add descriptive anchors that reflect the question being answered. Limit deep nesting behind multiple clicks. Better linking clarifies intent for assistants.` },
          { title: "Content Depth Analysis", text: d=>`Several sections on ${d} mix promotional copy with instructions, making it harder to quote or summarize. Separate “how to” guidance from marketing claims and add concrete steps and examples. Depth should map to real user tasks. This reduces deflection to aggregators.` },
          { title: "Site Architecture Issues", text: d=>`Overlapping sections and diffuse navigation on ${d} blur topic boundaries at crawl time. Consolidate duplicative pages and elevate core categories. Use clear breadcrumbs and descriptive URLs. A coherent spine helps models map questions to definitive answers.` },
          { title: "Local SEO Signals", text: d=>`Location and service area cues on ${d} are faint or scattered. Add structured NAP details, hours, and service regions where relevant. Align with major profiles and link back to canonical pages. Strong local signals improve location‑qualified prompts.` },
          { title: "Content Freshness Gaps", text: d=>`Several key pages on ${d} lack update cadence or last‑modified signals. Time‑sensitive claims should cite dates and sources. Add lightweight changelogs or revision notes on evergreen assets. Freshness helps assistants prefer your page over older references.` },
          { title: "Core Web Vitals Optimization", text: d=>`Layout stability and input delay on parts of ${d} may degrade snippet capture and render quality. Focus on LCP media, CLS from injected elements, and INP from heavy scripts. Improve first‑screen scannability for task content. Faster, stable pages perform better in assistant flows.` },
          { title: "Result Framing Signals", text: d=>`Several titles and meta descriptions on ${d} don’t summarize the primary answer succinctly. Tighten titles to the user task, and write meta descriptions that preview the steps or outcome. Clear framing increases eligibility for previews and link cards.` },
          { title: "Heading Structure", text: d=>`Some pages on ${d} jump heading levels or include multiple H1‑like spines. Normalize to one H1 that states the core claim, with H2/H3s that ladder into steps, comparisons, or FAQs. Predictable structure improves parsing and disambiguation.` },
          { title: "Image Alt Text Coverage", text: d=>`A subset of images on ${d} lack alt attributes, creating noise for parsers. Add concise, factual alt text where images carry meaning, and mark decorative images appropriately. Keep captions aligned with entity names and actions.` },
          { title: "Mobile Interaction Friction", text: d=>`Interactive controls on ${d} sometimes block reading flow or hide answers behind accordions without summaries. Provide short visible answers before toggles. Ensure tap targets are large and keyboard accessible.` },
          { title: "Robots & Sitemaps Hygiene", text: d=>`robots.txt and XML sitemaps on ${d} could better highlight canonical answer pages. List preferred URLs and remove outdated paths. Use crawl allowances reflecting public content strategy.` },
          { title: "Canonicalization & Duplicates", text: d=>`Similar content exists at multiple URLs on ${d}, diluting signals. Consolidate to a single canonical per topic and standardize internal links to that version. Guard against UTM/filter variants indexing.` },
          { title: "FAQ Coverage", text: d=>`FAQs on ${d} miss common “how” and “compare” questions. Add 4–6 tightly scoped Q&As per key page, avoid overlap, keep answers short, and link to deeper sections. This maps cleanly to assistant snippets.` },
          { title: "Topic Focus Clarity", text: d=>`Several pages on ${d} try to cover multiple intents at once, weakening the primary answer. Split complex topics or isolate with H2 blocks and crisp summaries. Lead with the most common task.` },
          { title: "Internal Connection Mapping", text: d=>`Important entities on ${d} are mentioned but not consistently cross‑linked to their canonical pages. Add in‑text anchors on first mention with consistent labels to aid multi‑hop reasoning.` },
          { title: "Author & Bylines", text: d=>`Expertise indicators on ${d} are light. Add author names with roles, short bios, and a clear contact path. Include an About/company snippet that states core competency. Strong identity cues increase trust.` },
          { title: "Third‑Party Profile Consistency", text: d=>`Organization details for ${d} vary across profiles/directories. Align names, categories, and links; ensure each profile points to the same canonical URL. Consistency improves verification.` },
          { title: "Structured Data Depth", text: d=>`Beyond baseline Org and WebSite, ${d} would benefit from Article/BlogPosting where relevant, plus FAQ and Breadcrumbs. Validate at scale and monitor warnings.` },
          { title: "Evidence & Citations", text: d=>`Claims on ${d} often lack inline citations or date contexts, causing assistants to prefer sources with clearer provenance. Add short citations near stats/policies and link to primary sources.` }
        ];
      }

      /* ========== LLM section: bullets → logo + paragraph ========== */
      function transformAIInsights(root){
        const title=Array.from(root.querySelectorAll('.section-title')).find(n=>/ai\s*engine\s*insights/i.test(n.textContent||'')); if(!title) return;
        let ul=title.nextElementSibling; while(ul&&ul.tagName&&ul.tagName.toLowerCase()!=='ul') ul=ul.nextElementSibling; if(!ul) return;
        const texts=Array.from(ul.querySelectorAll('li')).map(li=>li.textContent.trim()); if(!texts.length) return;
        const engines=['ChatGPT','Claude','Gemini','Copilot','Perplexity'];
        const container=document.createElement('div'); container.className='llm-insights';
        engines.forEach((engine,i)=>{ const t=texts[i]||''; if(!t) return; const row=document.createElement('div'); row.className='llm-row';
          row.appendChild(logoDivFor(engine));
          const p=document.createElement('p'); p.textContent=t; row.appendChild(p);
          container.appendChild(row); });
        ul.replaceWith(container);
      }
    });
  </script>
</body>
</html>
