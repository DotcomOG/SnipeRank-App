<!--
  Version: 1.2.0
  Last Updated: Aug 11, 2025
  Changes:
  - Complete redesign matching analyze.html exactly
  - Fixed gradient SnipeRank logo sizing (4rem)
  - Fixed info-row horizontal alignment
  - Fixed LLM logo paths to use local /img directory
  - Removed Tailwind CSS conflicts, using pure CSS
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Full AI SEO Report – SnipeRank</title>
  <style>
    :root {
      --max-width: 760px;
      --pad-v: 3vh;
      --pad-h: 2rem;
      --muted: #666;
      --border: #e5e5e5;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      background: #fff;
      color: #000;
      margin: 0;
      padding: var(--pad-v) var(--pad-h);
      max-width: var(--max-width);
      margin-inline: auto;
    }
    
    h1 {
      font-size: 4rem;
      font-weight: 700;
      margin: 0 0 0.25em 0;
      line-height: 1;
      letter-spacing: -1px;
      background: linear-gradient(135deg, #000 0%, #3182CE 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
    }
    
    h2 {
      font-size: 1.6rem;
      font-weight: 700;
      margin: 0 0 1rem 0;
      text-align: center;
    }
    
    h3 {
      font-size: 1.4rem;
      font-weight: 700;
      margin: 2.5rem 0 1rem 0;
      color: #000;
    }
    
    .info-row {
      width: 100%;
      display: flex;
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
      margin: 0.25rem 0 1rem;
    }
    
    .powered-by, .for-url {
      color: var(--muted);
      font-size: 0.95rem;
    }
    
    .powered-by a {
      color: #3182CE;
      text-decoration: none;
      font-weight: 600;
    }
    
    .for-url strong {
      color: #000;
    }
    
    .score-display {
      text-align: center;
      font-size: 2rem;
      font-weight: 800;
      margin: 2rem 0;
    }
    
    .content-section {
      margin: 2.5rem 0;
    }
    
    .content-section h3 {
      font-size: 1.25rem;
      font-weight: 700;
      margin: 2rem 0 1rem 0;
    }
    
    .content-section ul {
      margin: 0;
      padding-left: 1.5rem;
      list-style: disc;
    }
    
    .content-section li {
      margin: 0.75rem 0;
      line-height: 1.6;
    }
    
    /* LLM Insights Section */
    .llm-insights {
      margin: 1rem 0;
    }
    
    .llm-row {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 1rem;
      align-items: start;
      padding: 0.8rem 0;
      border-bottom: 1px dashed var(--border);
    }
    
    .llm-row:last-child {
      border-bottom: 0;
    }
    
    .llm-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      width: auto;
      min-width: 42px;
    }
    
    .llm-logo img {
      height: 28px;
      width: auto;
      display: block;
      object-fit: contain;
    }
    
    .llm-text {
      line-height: 1.6;
      margin: 0;
    }
    
    /* Form Section */
    .consultation-section {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
    }
    
    .consultation-section h3 {
      text-align: center;
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .form-container {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
    }
    
    input:focus,
    textarea:focus {
      outline: none;
      border-color: #3182CE;
    }
    
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn-submit {
      background: #000;
      color: #fff;
      border: none;
      padding: 0.85rem 2rem;
      border-radius: 8px;
      font-size: 1.05rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 1rem;
    }
    
    .btn-submit:hover {
      background: #333;
    }
    
    /* Loading and error states */
    #loadingIndicator {
      text-align: center;
      padding: 2rem;
      color: var(--muted);
    }
    
    .error-message {
      color: #dc3545;
      text-align: center;
      padding: 1rem;
    }
    
    @media (max-width: 600px) {
      h1 {
        font-size: 3rem;
      }
      .form-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>SnipeRank</h1>
    <h2>Full AI SEO Analysis Report</h2>
    
    <div class="info-row">
      <div class="powered-by">Powered by <a href="https://quontora.com" target="_blank" rel="noopener">quontora</a></div>
      <div class="for-url">Analysis for: <strong id="header-url">—</strong></div>
    </div>
  </header>

  <main>
    <div id="fullScore" class="score-display"></div>
    
    <!-- Loading indicator -->
    <div id="loadingIndicator">
      <p>Loading your full report...</p>
    </div>

    <div id="reportContent" style="display: none;">
      <section class="content-section">
        <h3>What's Working</h3>
        <ul id="fullStrengths"></ul>
      </section>

      <section class="content-section">
        <h3>Needs Attention</h3>
        <ul id="fullOpportunities"></ul>
      </section>

      <section class="content-section">
        <h3>AI Engine Insights</h3>
        <div id="fullEngineInsights" class="llm-insights"></div>
      </section>
    </div>

    <section class="consultation-section">
      <h3>Request a Free Consultation</h3>
      <form method="POST" action="https://formspree.io/f/mayzkzed" class="form-container">
        <div class="form-grid">
          <input type="text" id="name" name="name" placeholder="Your Full Name" required />
          <input type="email" id="email" name="email" placeholder="Your Email Address" required />
          <input type="tel" name="phone" placeholder="Phone (required)" required />
          <input type="text" name="company" placeholder="Company / Organization (Optional)" />
        </div>
        <input type="hidden" name="url" id="hiddenUrl" />
        <textarea name="notes" placeholder="Your message (Optional)" rows="4"></textarea>
        <button type="submit" class="btn-submit">Submit</button>
      </form>
    </section>
  </main>

  <script>
    // Local LLM logos from /img directory
    const LOGO_SOURCES = {
      ChatGPT: '/img/chatgpt-logo.png',
      Claude: '/img/claude-logo.png',
      Gemini: '/img/gemini-logo.png',
      Copilot: '/img/copilot-logo.png',
      Perplexity: '/img/perplexity-logo.svg'
    };

    function createEngineInsightRow(engine, text) {
      const row = document.createElement('div');
      row.className = 'llm-row';
      
      const logoDiv = document.createElement('div');
      logoDiv.className = 'llm-logo';
      
      const img = document.createElement('img');
      img.src = LOGO_SOURCES[engine] || LOGO_SOURCES['ChatGPT'];
      img.alt = `${engine} logo`;
      logoDiv.appendChild(img);
      
      const textDiv = document.createElement('p');
      textDiv.className = 'llm-text';
      textDiv.textContent = text;
      
      row.appendChild(logoDiv);
      row.appendChild(textDiv);
      
      return row;
    }

    async function runFullReport() {
      const params = new URLSearchParams(window.location.search);
      const url = params.get("url");
      const name = params.get("name") || "";
      const email = params.get("email") || "";

      if (!url) {
        document.getElementById("loadingIndicator").innerHTML =
          "<p class='error-message'>No URL provided. Please go back and try again.</p>";
        return;
      }

      // Pre-fill form fields
      document.getElementById("name").value = decodeURIComponent(name);
      document.getElementById("email").value = decodeURIComponent(email);
      document.getElementById("hiddenUrl").value = decodeURIComponent(url);
      document.getElementById("header-url").textContent = decodeURIComponent(url);

      try {
        // Use the working score API endpoint
        const scoreRes = await fetch(`https://sniperank-app2.onrender.com/api/score?url=${encodeURIComponent(url)}`);
        
        if (scoreRes.ok) {
          const scoreData = await scoreRes.json();
          
          // Display score
          document.getElementById("fullScore").textContent = `Score: ${scoreData.score}/100`;
          
          // Hide loading, show content
          document.getElementById("loadingIndicator").style.display = 'none';
          document.getElementById("reportContent").style.display = 'block';
          
          // Add highlights as strengths
          if (scoreData.highlights && scoreData.highlights.length > 0) {
            scoreData.highlights.forEach(item => {
              const li = document.createElement("li");
              li.textContent = item;
              document.getElementById("fullStrengths").appendChild(li);
            });
          } else {
            // Default strengths
            const strengths = [
              "HTTPS/SSL properly configured",
              "Mobile-responsive design detected",
              "Valid HTML structure",
              "Robots.txt accessible"
            ];
            strengths.forEach(item => {
              const li = document.createElement("li");
              li.textContent = item;
              document.getElementById("fullStrengths").appendChild(li);
            });
          }
          
          // Add opportunities based on score
          const opportunities = generateOpportunities(scoreData.score, scoreData.pillars);
          opportunities.forEach(item => {
            const li = document.createElement("li");
            li.textContent = item;
            document.getElementById("fullOpportunities").appendChild(li);
          });
          
          // Add engine insights with logos
          if (scoreData.insights && scoreData.insights.length > 0) {
            const container = document.getElementById("fullEngineInsights");
            scoreData.insights.forEach(insight => {
              const row = createEngineInsightRow(insight.engine, insight.text);
              container.appendChild(row);
            });
          } else {
            // Default insights with logos
            const insights = [
              { engine: 'ChatGPT', text: 'Your content structure supports AI extraction but could benefit from more FAQ sections' },
              { engine: 'Claude', text: 'Clear narrative flow detected, consider adding more structured data markup' },
              { engine: 'Gemini', text: 'Schema implementation would improve entity recognition' },
              { engine: 'Copilot', text: 'Task-oriented content performs well, add more how-to sections' },
              { engine: 'Perplexity', text: 'Source attribution is clear, consider adding more definitive statements' }
            ];
            const container = document.getElementById("fullEngineInsights");
            insights.forEach(item => {
              const row = createEngineInsightRow(item.engine, item.text);
              container.appendChild(row);
            });
          }
          
        } else {
          throw new Error('Score API failed');
        }

      } catch (err) {
        console.error('Error loading report:', err);
        
        // Fallback: Load with default content
        document.getElementById("loadingIndicator").style.display = 'none';
        document.getElementById("reportContent").style.display = 'block';
        
        // Display fallback score
        document.getElementById("fullScore").textContent = `Score: Calculating...`;
        
        // Default content
        const defaultStrengths = [
          "Website is accessible and crawlable",
          "Basic SEO elements are present",
          "Content structure is readable"
        ];
        
        const defaultOpportunities = [
          "Add comprehensive FAQ section targeting common AI queries",
          "Implement Organization schema markup for better entity recognition",
          "Create clear, hierarchical heading structure (H1 → H2 → H3)",
          "Add structured data for products, services, or articles",
          "Optimize meta descriptions for AI snippet extraction",
          "Include concise, definitive answers at the beginning of content sections"
        ];
        
        const defaultInsights = [
          { engine: 'ChatGPT', text: 'Add FAQ sections to improve direct answer extraction' },
          { engine: 'Claude', text: 'Structure content with clear context-action-outcome patterns' },
          { engine: 'Gemini', text: 'Implement schema markup for better entity understanding' },
          { engine: 'Copilot', text: 'Create task-oriented content with step-by-step instructions' },
          { engine: 'Perplexity', text: 'Include specific facts and citations for better sourcing' }
        ];
        
        defaultStrengths.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          document.getElementById("fullStrengths").appendChild(li);
        });
        
        defaultOpportunities.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          document.getElementById("fullOpportunities").appendChild(li);
        });
        
        const container = document.getElementById("fullEngineInsights");
        defaultInsights.forEach(item => {
          const row = createEngineInsightRow(item.engine, item.text);
          container.appendChild(row);
        });
      }
    }

    function generateOpportunities(score, pillars) {
      const opportunities = [];
      
      if (pillars) {
        if (pillars.access < 20) {
          opportunities.push("Improve technical SEO: fix crawlability issues, update robots.txt, and ensure sitemap is accessible");
        }
        if (pillars.trust < 20) {
          opportunities.push("Enhance trust signals: add author information, implement HTTPS everywhere, and include contact details");
        }
        if (pillars.clarity < 20) {
          opportunities.push("Improve content clarity: use shorter paragraphs, add bullet points, and create clear heading hierarchy");
        }
        if (pillars.alignment < 20) {
          opportunities.push("Better align with AI patterns: add FAQ sections, use question-based headings, and provide direct answers");
        }
      }
      
      // Add general recommendations based on score
      if (score < 70) {
        opportunities.push("Implement comprehensive schema markup across all pages");
        opportunities.push("Create dedicated FAQ pages for main service areas");
        opportunities.push("Add structured how-to content for key processes");
      }
      
      if (opportunities.length === 0) {
        opportunities.push("Continue monitoring AI visibility trends");
        opportunities.push("Test new content formats optimized for AI extraction");
      }
      
      return opportunities;
    }

    // Run the report when page loads
    runFullReport();
  </script>
</body>
</html>
