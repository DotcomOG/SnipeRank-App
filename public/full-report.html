<!--
  Version: 1.10.2
  Last Updated: Aug 11, 2025
  Changes:
  - Removed "Get Your Full Report" form entirely
  - Centered "Ready to Improve..." CTA (matches analyze)
  - Logos handled same as analyze elsewhere in file
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>SnipeRank — AI SEO Analysis Results</title>
<style>
  :root{--max-width:760px;--pad-v:3vh;--pad-h:2rem;--muted:#666;--border:#e5e5e5}
  *{box-sizing:border-box}
  body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;background:#fff;color:#000;margin:0;padding:var(--pad-v) var(--pad-h);max-width:var(--max-width);margin-inline:auto}
  h1{font-size:4rem;font-weight:700;margin:0 0 .25em 0;line-height:1;letter-spacing:-1px;background:linear-gradient(135deg,#000 0%,#3182CE 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
  h2{font-size:1.6rem;font-weight:700;margin:0 0 1rem 0}
  h3{font-size:1.25rem;font-weight:700;margin:2rem 0 1rem 0}
  p{font-size:1.05rem;line-height:1.65;margin:.25rem 0 1rem}
  .info-row{width:100%;display:flex;gap:1rem;align-items:center;justify-content:space-between;margin:.25rem 0 1rem}
  .powered-by,.for-url{color:var(--muted);font-size:.95rem}
  .powered-by a{color:#3182CE;text-decoration:none;font-weight:600}
  .content-section{margin:2rem 0}
  .content-section ul{margin:0;padding-left:1.25rem;list-style:disc}
  .content-section li{margin:.6rem 0;line-height:1.65}

  .consultation{text-align:center;margin:3rem 0 1rem;padding-top:2rem;border-top:1px solid var(--border)}
  .btn{display:inline-block;background:#dc3545;color:#fff;border:none;border-radius:8px;padding:.9rem 1.5rem;font-weight:700;text-decoration:none}
  .btn:hover{background:#c82333}
</style>
</head>
<body>
  <h1>SnipeRank</h1>
  <h2>AI SEO Analysis Results</h2>

  <div class="info-row">
    <div class="powered-by">Powered by <a href="https://quontora.com" target="_blank" rel="noopener">quontora</a></div>
    <div class="for-url">Analysis for: <strong id="urlTxt">—</strong></div>
  </div>

  <section class="content-section">
    <h3>What's Working</h3>
    <ul id="strengths"></ul>
  </section>

  <section class="content-section">
    <h3>Needs Attention</h3>
    <ul id="needs"></ul>
  </section>

  <section class="content-section">
    <h3>AI Engine Insights</h3>
    <div id="engines"></div>
  </section>

  <div class="consultation">
    <p><strong>Ready to Improve Your AI Visibility?</strong></p>
    <p>Book a free 30‑minute consultation to turn this report into a 30‑day plan with owners & timelines.</p>
    <p><a href="https://calendly.com/quontora" class="btn" target="_blank" rel="noopener">Schedule Free Consultation</a></p>
  </div>

<script>
  function boldFirstSentence(t){
    t=(t||'').trim(); if(!t) return '';
    const i=t.indexOf('.'); if(i===-1||i>240) return `<strong>${t}</strong>`;
    return `<strong>${t.slice(0,i+1).trim()}</strong> ${t.slice(i+1).trim()}`;
  }
  function ensureCount(arr,count){const out=[...arr]; while(out.length<count) out.push(out[out.length-1]||''); out.length=count; return out;}

  async function init(){
    const qs=new URLSearchParams(location.search);
    const url=qs.get('url')||'https://example.com';
    document.getElementById('urlTxt').textContent=url;

    let strengths=[],needs=[],insights=[];
    try{
      const r=await fetch(`https://sniperank-app2.onrender.com/api/score?url=${encodeURIComponent(url)}`);
      if(r.ok){ const d=await r.json(); strengths=d.strengths||d.highlights||[]; needs=d.needs||[]; insights=d.insights||[]; }
    }catch{}

    // Ensure 5 strengths (3–5 sentences) and 20 needs (4–6 sentences)
    strengths = ensureCount(strengths,5);
    needs = ensureCount(needs,20);

    const sUL=document.getElementById('strengths'); sUL.innerHTML='';
    strengths.forEach(x=>{const li=document.createElement('li'); li.innerHTML=boldFirstSentence(String(x)); sUL.appendChild(li);});
    const nUL=document.getElementById('needs'); nUL.innerHTML='';
    needs.forEach(x=>{const li=document.createElement('li'); li.innerHTML=boldFirstSentence(String(x)); nUL.appendChild(li);});

    // LLM Insights: if API provided text, render as simple paragraphs (logos already covered in analyze)
    const eng=document.getElementById('engines');
    (insights||[]).forEach(item=>{ const p=document.createElement('p'); p.textContent=item.text||item.description||''; eng.appendChild(p); });
    if(!eng.children.length){ eng.innerHTML='<p>Assistant perspectives will appear here when available for this domain.</p>'; }
  }
  init();
</script>
</body>
</html>
